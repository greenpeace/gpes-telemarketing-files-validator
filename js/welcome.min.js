$("#clear").on("click",function(){$("#errorHeaders, #errorRecords").hide(),$("#recordsNumber, #fileHash").text(" ")}),$("#submit").on("click",function(){$("button").css("cursor","progress");var e=$("#files").val().split(".").pop().toLowerCase();-1==$.inArray(e,["csv"])?($("#errorHeaders, #errorRecords").hide(),alert("O no has elegido un fichero o tienes una extensión de fichero inválida. Tienes que elegir un fichero .csv"),$("button").css("cursor","pointer")):$("input[type=file]").parse({config:{header:!0,complete:function(e,r){$("#errorHeaders, #errorRecords").hide();var t=JSON.stringify(e.data),a=sha1(t);if($("#fileHash").text(a),!0!==recaptureFileValidator.checkFields(e.meta.fields))$("#errorHeaders").show(),$("#recordsNumber").text(" "),$("#correctHeaders").html(tlmkValidator.arrayToHtmlList(recaptureFileValidator.fields)),$("#headersInTheFile").html(tlmkValidator.arrayToHtmlList(e.meta.fields));else{var o="";for(n in e=tlmkValidator.clean(e),$("#recordsNumber").text(e.data.length),e.data)e.data.hasOwnProperty(n)&&(o+=recaptureFileValidator.checkCsvData(n,e.data[n]));1<=o.length&&($("#errorRecords pre").text(o),$("#errorRecords").show())}$("button").css("cursor","pointer")}},complete:function(){}})});